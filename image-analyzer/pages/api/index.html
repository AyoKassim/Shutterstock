<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
      .photo-res{
        max-width: 650px;
        padding: 20px;
        margin: 30px auto;
        background-color: rgb(200, 205, 214);
        box-shadow: 3px 3px 3px rgba(0, 0, 0, 0.1);
        overflow: hidden;
      }
      .img-res{
        float: left;
        width: 100%;
        max-height: 500px;
        margin-right: 15px;
        margin-bottom: 10px;
      }
      .back-button{
        margin: 0px auto;
        overflow: hidden;
        text-align: center;
      }

      
    </style>
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</head>
<body>
    <nav class="navbar navbar-light bg-light">
        <div class="container" style="margin-left: 0;">
          <a class="navbar-brand" href="#">
            <img src="/logo.png" width = "200px" />
          </a>
        </div>
      </nav>
      <h1 style = "text-align: center; padding-top: 20px;">Results of Analysis</h1>

      <div class = "container">
        <div class = "row">
          <div class = "col">
            <div id = "results"></div>
          </div>
          <div class = "col" style="background-color: rgb(200, 205, 214); padding: 20px; margin: 30px auto; box-shadow: 3px 3px 3px rgba(0, 0, 0, 0.1);">
            <h2 style="margin: 30px auto; padding: 20px; padding-top: 0px; margin-top: 0px;">Explanation of Metrics</h2>
            <p style="margin: 30px auto; padding: 20px;" ><strong>Brisque Analysis:</strong> A smaller score indicates better perceptual quality. Ideally less than 20, anything above 50 is probably blurry or noisy.
            If your score is high, try retaking the image with more light or keep the camera steadier to reduce blurriness</p>
            <p style="margin: 30px auto; padding: 20px;" ><strong>Similar Images:</strong> This is how many images that look similar to your uploaded image. A low score indicates
            that your image is unique. Try to keep this figure around 500</p>
            <p style="margin: 30px auto; padding: 20px;" ><strong>Sugested Tags:</strong> These are tags are generated based on the image content, and help with indentifying your image.</p>
            <p style="margin: 30px auto; padding: 20px;" ><strong>Trendyness:</strong> This is scored out of 1. The closer to one the more topical the associated tags are which indicates a higher likelyhood to sell</p>
          </div>
        </div>
      </div>
      <div class="back-button">
      <form action="http://localhost:3000/">
        <input type="submit" value="Go Back" />
      </form>
    </div>
    
      <script>
        async function getStuff()
        {
          
          const response = await fetch(new Request('/generated.json'))
          const data = await response.json();
          

          //console.log(`data is: ${data}`);

          document.getElementById("results").innerHTML = `
          <div class = "photo-res">
            <img class = "img-res" src = "/${data["name"]}"/>
            <p><strong>Image name: </strong> ${data["name"]}</p>
            <p><strong>Brisque Score: </strong>${data["brisque"]}</p>
            <p><strong>Amount of similar images found: </strong>${data["reverse-image-search"]}</p>
            <p><strong>Size of image uploaded: </strong>${data["size"]} bytes</p>
            <p><strong>Suggested Tags: </strong>${data.tags.result.tags[0].tag.en}, ${data.tags.result.tags[1].tag.en}, ${data.tags.result.tags[2].tag.en}, ${data.tags.result.tags[3].tag.en}, ${data.tags.result.tags[4].tag.en}</p>
            <p><strong>Trendyness: </strong>${data["trendSearch"]}</p>
          </div>
          `
          /**
          const keys = Object.keys(data);
          const values = Object.values(data);
          for(let i = 0; i < keys.length; i++){
            const key = keys[i]; const value = values[i];
            if(key == "tags"){
              key.result.tags[1]
              var text = document.createTextNode(key.result.tags[1]);
              var tag = document.createElement("h2");
            }else{
            var tag = document.createElement("h2");
            var text = document.createTextNode(key + " " + value); 
            }
            tag.style = 'text-align: center;';
            tag.appendChild(text); // <p>TEST TEXT</p>
            var element = document.getElementsByTagName("body")[0];
            element.appendChild(tag); // <body> <p>TEST TEXT</p> </body>
          }
          **/
        }
        getStuff();
      </script>
    
</body>
</html>